#!/usr/bin/env python3

import collections

import psutil

FLOAT_FORMAT = '{:0>4.1f}'

VIRTUAL_MEM_PERCENT = psutil.virtual_memory().percent
SWAP_MEM_PERCENT = psutil.swap_memory().percent
MEM_OUTPUT = 'mem {0}% swap {0}%'.format(FLOAT_FORMAT).format(VIRTUAL_MEM_PERCENT, SWAP_MEM_PERCENT)

DISK_USAGE_PERCENT = collections.OrderedDict(sorted(
    {dp.mountpoint: psutil.disk_usage(dp.mountpoint).percent
     for dp in psutil.disk_partitions()}.items()))
DISK_USAGE_OUTPUT = ' '.join('{} {}%'.format('{}', FLOAT_FORMAT).format(k, v)
                             for k, v in DISK_USAGE_PERCENT.items())

CPU_PERCENT = psutil.cpu_percent(interval=0.5)
CPU_OUTPUT = 'cpu {}%'.format(FLOAT_FORMAT).format(CPU_PERCENT)

SEPARATOR = ' :: '
OUTPUT = SEPARATOR.join([CPU_OUTPUT, MEM_OUTPUT, DISK_USAGE_OUTPUT])
print(OUTPUT)
